(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[427],{9345:function(e,t,a){Promise.resolve().then(a.bind(a,6764))},6764:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=a(7437),r=a(2265);function c(){let[e,t]=(0,r.useState)([]),[a,c]=(0,r.useState)(!0),[i,n]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),[d,h]=(0,r.useState)(new Set),[m,x]=(0,r.useState)(0);(0,r.useEffect)(()=>{p()},[m]);let p=async()=>{try{c(!0);let e=await fetch("/api/games",{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!e.ok)throw Error("Failed to fetch games");let a=await e.json();console.log("Fetched games:",a),t(a),n("")}catch(e){console.error("Error fetching games:",e),n("Failed to load games"),t([])}finally{c(!1)}},g=async()=>{if(!o)try{if(l(!0),!(await fetch("/api/games",{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to create game");x(e=>e+1)}catch(e){console.error("Error creating game:",e),n("Failed to create game")}finally{l(!1)}},u=async e=>{if(!d.has(e))try{if(h(t=>new Set(t).add(e)),!(await fetch("/api/games?id=".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete game");x(e=>e+1)}catch(e){console.error("Error deleting game:",e),n("Failed to delete game")}finally{h(t=>{let a=new Set(t);return a.delete(e),a})}};return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Admin Dashboard"}),a?(0,s.jsx)("p",{children:"Loading..."}):i?(0,s.jsx)("p",{className:"text-red-500",children:i}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Active Games"}),(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-700",children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Game ID"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Created At"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-700",children:e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-300",children:e.roomId}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-300",children:e.status}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-300",children:new Date(e.createdAt).toLocaleString()}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("button",{onClick:()=>u(e.roomId),disabled:d.has(e.roomId),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition-colors ".concat(d.has(e.roomId)?"opacity-50 cursor-not-allowed":""),children:d.has(e.roomId)?"Deleting...":"Delete"})})]},e._id))})]})})]}),(0,s.jsx)("button",{onClick:g,disabled:o,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors ".concat(o?"opacity-50 cursor-not-allowed":""),children:o?"Creating...":"Create Game"})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=9345)}),_N_E=e.O()}]);