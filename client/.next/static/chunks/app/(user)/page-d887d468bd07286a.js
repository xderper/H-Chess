(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[282],{9220:function(e,n,o){Promise.resolve().then(o.bind(o,2399))},2399:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return a}});var t=o(7437),r=o(2265),c=o(5749),l=o(9376),s=o(2293),i=o.n(s);function a(){let[e,n]=(0,r.useState)(""),[o,s]=(0,r.useState)(""),a=(0,l.useRouter)();return(0,r.useEffect)(()=>{let e=(0,c.z)();return()=>{e.removeAllListeners()}},[]),(0,t.jsx)("main",{className:i().main,children:(0,t.jsxs)("div",{className:i().container,children:[(0,t.jsx)("h1",{className:i().title,children:"Chess Game"}),(0,t.jsxs)("div",{className:i().form,children:[(0,t.jsx)("input",{type:"text",value:e,onChange:e=>n(e.target.value),placeholder:"Enter Room ID",className:i().input}),(0,t.jsx)("button",{onClick:()=>{if(!e.trim()){s("Please enter a room ID");return}let n=(0,c.h)();if(!n){s("Connection error");return}console.log("Joining game room:",e),s(""),n.removeAllListeners("player_color"),n.removeAllListeners("error"),n.emit("join_game_room",e),n.once("player_color",n=>{console.log("Received color:",n),a.push("/game?room=".concat(e))}),n.once("error",e=>{console.error("Socket error:",e),s(e)})},className:i().button,children:"Join Game"})]}),o&&(0,t.jsx)("p",{className:i().error,children:o})]})})}},5749:function(e,n,o){"use strict";o.d(n,{h:function(){return s},z:function(){return l}});var t=o(8680);let r=null,c=0,l=()=>(r||((r=(0,t.io)("http://localhost:3001",{transports:["websocket"],reconnection:!0,reconnectionAttempts:3,reconnectionDelay:1e3,timeout:5e3,autoConnect:!1})).on("connect_error",e=>{console.error("Socket connection error:",e),++c>=3&&(console.error("Max connection attempts reached"),null==r||r.disconnect(),r=null,c=0)}),r.on("connect",()=>{console.log("Socket connected successfully"),c=0}),r.on("disconnect",e=>{console.log("Socket disconnected:",e)})),r&&!r.connected&&(console.log("Attempting to connect socket..."),r.connect()),r),s=()=>r&&r.connected?r:null},2293:function(e){e.exports={main:"page_main__GlU4n",container:"page_container__aoG4z",title:"page_title__3jonF",form:"page_form__Ou5d6",input:"page_input___cVLA",button:"page_button__vnlhW",error:"page_error__Jil8M"}}},function(e){e.O(0,[591,721,971,117,744],function(){return e(e.s=9220)}),_N_E=e.O()}]);